2025-04-10 21:26:46,063 - werkzeug - WARNING -  * Debugger is active!
2025-04-10 21:26:46,066 - werkzeug - INFO -  * Debugger PIN: 691-175-853
2025-04-10 21:26:46,159 - Review.reviews.lc100_review - INFO - Loading EOD data...
2025-04-10 21:27:03,701 - Review.reviews.lc100_review - INFO - Loading reference data...
2025-04-10 21:27:13,236 - Review.reviews.lc100_review - WARNING - Removed 18750 duplicate rows from cdp_climate_df
2025-04-10 21:27:13,238 - Review.reviews.lc100_review - INFO - Filtering universe for EU500 companies...
2025-04-10 21:27:13,239 - Review.reviews.lc100_review - INFO - Universe size after EU500 filter: 499
2025-04-10 21:27:13,240 - Review.reviews.lc100_review - INFO - Adding Free Float data...
2025-04-10 21:27:13,243 - Review.reviews.lc100_review - INFO - Adding ICB Subsector data...
2025-04-10 21:27:13,257 - Review.reviews.lc100_review - WARNING - Removed 9316 duplicate rows from ICB data
2025-04-10 21:27:13,355 - Review.reviews.lc100_review - INFO - Debug file saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\debug\universe_df_after_nace_20250410_212713.xlsx
2025-04-10 21:27:13,356 - Review.reviews.lc100_review - INFO - Adding CDP Climate data...
2025-04-10 21:27:13,360 - Review.reviews.lc100_review - INFO - Adding Oekom Trust & Carbon data...
2025-04-10 21:27:13,362 - Review.reviews.lc100_review - INFO - Adding NACE data...
2025-04-10 21:27:13,364 - Review.reviews.lc100_review - INFO - Adding EU Taxonomy flag...
2025-04-10 21:27:13,365 - Review.reviews.lc100_review - INFO - Checking GAFI lists and Non-fiscally cooperative countries...
2025-04-10 21:27:13,366 - Review.reviews.lc100_review - INFO - Applying exclusion criteria...
2025-04-10 21:27:13,374 - Review.reviews.lc100_review - INFO - Marked 50 companies (10%) with worst SG scores for exclusion
2025-04-10 21:27:13,392 - Review.reviews.lc100_review - INFO - Calculating Climate Score for ranking...
2025-04-10 21:27:13,393 - Review.reviews.lc100_review - INFO - Selecting EU Taxonomy companies...
2025-04-10 21:27:13,394 - Review.reviews.lc100_review - INFO - Found 13 EU Taxonomy companies after exclusions
2025-04-10 21:27:13,395 - Review.reviews.lc100_review - INFO - Found 303 Non-EU Taxonomy eligible companies after exclusions
2025-04-10 21:27:13,395 - Review.reviews.lc100_review - INFO - STEP 4a: Determining target number of Non-EU Taxonomy companies per super-sector...
2025-04-10 21:27:13,396 - Review.reviews.lc100_review - INFO - Target number of Non-EU Taxonomy companies: 87
2025-04-10 21:27:13,396 - Review.reviews.lc100_review - INFO - Total eligible Non-EU Taxonomy companies: 303
2025-04-10 21:27:13,397 - Review.reviews.lc100_review - INFO - Total target after rounding: 98 (vs. target of 87)
2025-04-10 21:27:13,397 - Review.reviews.lc100_review - INFO - Need to remove 11 companies due to rounding up
2025-04-10 21:27:13,399 - Review.reviews.lc100_review - INFO - STEP 4b: Selecting Non-EU Taxonomy companies based on climate score...
2025-04-10 21:27:13,399 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 1010.0
2025-04-10 21:27:13,400 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 1510.0
2025-04-10 21:27:13,401 - Review.reviews.lc100_review - INFO - Selected 13 companies from super-sector 2010.0
2025-04-10 21:27:13,402 - Review.reviews.lc100_review - INFO - Selected 13 companies from super-sector 3010.0
2025-04-10 21:27:13,402 - Review.reviews.lc100_review - INFO - Selected 7 companies from super-sector 3020.0
2025-04-10 21:27:13,403 - Review.reviews.lc100_review - INFO - Selected 8 companies from super-sector 3030.0
2025-04-10 21:27:13,403 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 3510.0
2025-04-10 21:27:13,404 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 4010.0
2025-04-10 21:27:13,404 - Review.reviews.lc100_review - INFO - Selected 6 companies from super-sector 4020.0
2025-04-10 21:27:13,405 - Review.reviews.lc100_review - INFO - Selected 3 companies from super-sector 4030.0
2025-04-10 21:27:13,406 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 4040.0
2025-04-10 21:27:13,406 - Review.reviews.lc100_review - INFO - Selected 4 companies from super-sector 4050.0
2025-04-10 21:27:13,406 - Review.reviews.lc100_review - INFO - Selected 6 companies from super-sector 4510.0
2025-04-10 21:27:13,407 - Review.reviews.lc100_review - INFO - Selected 3 companies from super-sector 4520.0
2025-04-10 21:27:13,407 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5010.0
2025-04-10 21:27:13,408 - Review.reviews.lc100_review - INFO - Selected 9 companies from super-sector 5020.0
2025-04-10 21:27:13,408 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5510.0
2025-04-10 21:27:13,409 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5520.0
2025-04-10 21:27:13,409 - Review.reviews.lc100_review - INFO - Selected 1 companies from super-sector 6510.0
2025-04-10 21:27:13,415 - Review.reviews.lc100_review - INFO - Initial selection has 98 companies, need to remove 11
2025-04-10 21:27:13,422 - Review.reviews.lc100_review - INFO - Removed company SE0012853455 from supersector 3020.0 (Climate Score: 2.9711404728789947)
2025-04-10 21:27:13,426 - Review.reviews.lc100_review - INFO - Removed company GB0005405286 from supersector 3010.0 (Climate Score: 2.6866666666666648)
2025-04-10 21:27:13,431 - Review.reviews.lc100_review - INFO - Removed company GB0004082847 from supersector 3010.0 (Climate Score: 2.585)
2025-04-10 21:27:13,437 - Review.reviews.lc100_review - INFO - Removed company GB00BPQY8M80 from supersector 3030.0 (Climate Score: 2.519710481764205)
2025-04-10 21:27:13,442 - Review.reviews.lc100_review - INFO - Removed company NO0003053605 from supersector 3030.0 (Climate Score: 2.45999707128425)
2025-04-10 21:27:13,447 - Review.reviews.lc100_review - INFO - Removed company GB00BM8PJY71 from supersector 3010.0 (Climate Score: 2.4596710826767954)
2025-04-10 21:27:13,452 - Review.reviews.lc100_review - INFO - Removed company GB00BYT1DJ19 from supersector 3020.0 (Climate Score: 2.458257086886375)
2025-04-10 21:27:13,457 - Review.reviews.lc100_review - INFO - Removed company GB00B0SWJX34 from supersector 3020.0 (Climate Score: 2.4582204139462247)
2025-04-10 21:27:13,462 - Review.reviews.lc100_review - INFO - Removed company GB0007099541 from supersector 3030.0 (Climate Score: 2.45)
2025-04-10 21:27:13,467 - Review.reviews.lc100_review - INFO - Removed company CH0011075394 from supersector 3030.0 (Climate Score: 2.39833333333333)
2025-04-10 21:27:13,472 - Review.reviews.lc100_review - INFO - Removed company FR0000121964 from supersector 3510.0 (Climate Score: 2.39735760225878)
2025-04-10 21:27:13,474 - Review.reviews.lc100_review - INFO - Final Non-EU Taxonomy selection has 87 companies
2025-04-10 21:27:13,474 - Review.reviews.lc100_review - INFO - Minimum companies per supersector: 1
2025-04-10 21:27:13,475 - Review.reviews.lc100_review - WARNING - Some supersectors have fewer than 2 companies! Minimum is 1
2025-04-10 21:27:13,476 - Review.reviews.lc100_review - INFO - Final selection contains 100 companies
2025-04-10 21:27:13,476 - Review.reviews.lc100_review - INFO - - EU Taxonomy: 13
2025-04-10 21:27:13,477 - Review.reviews.lc100_review - INFO - - Non-EU Taxonomy: 87
2025-04-10 21:27:13,477 - Review.reviews.lc100_review - INFO - Adding PAB flag based on CDP temperature score...
2025-04-10 21:27:13,477 - Review.reviews.lc100_review - INFO - Calculating liquidity constraints for all companies...
2025-04-10 21:27:13,479 - Review.reviews.lc100_review - ERROR - Error during review calculation: cannot access local variable 'eu_taxonomy_selection' where it is not associated with a value
2025-04-10 21:27:13,480 - Review.reviews.lc100_review - ERROR - Traceback (most recent call last):
  File "C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\Review\reviews\lc100_review.py", line 773, in run_lc100_review
    eu_taxonomy_selection['WIG'] = eu_taxonomy_selection['Mcap in EUR'] / total_ffmc
                                   ^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'eu_taxonomy_selection' where it is not associated with a value

2025-04-10 21:27:13,512 - werkzeug - INFO - 127.0.0.1 - - [10/Apr/2025 21:27:13] "POST /calculate HTTP/1.1" 200 -
2025-04-10 21:27:40,753 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
2025-04-10 21:27:40,762 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
2025-04-10 21:27:40,764 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
