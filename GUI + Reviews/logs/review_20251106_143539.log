2025-11-06 14:35:40,365 - werkzeug - WARNING -  * Debugger is active!
2025-11-06 14:35:40,365 - werkzeug - INFO -  * Debugger PIN: 691-175-853
2025-11-06 14:35:42,993 - werkzeug - INFO - 127.0.0.1 - - [06/Nov/2025 14:35:42] "POST /calculate HTTP/1.1" 200 -
2025-11-06 14:35:42,995 - Review.reviews.aetaw_review - INFO - Loading EOD data...
2025-11-06 14:35:42,998 - werkzeug - INFO - 127.0.0.1 - - [06/Nov/2025 14:35:42] "GET /task-status/8f4085bb-58b8-4d3a-85c3-2ef38c216d5c HTTP/1.1" 200 -
2025-11-06 14:35:45,002 - werkzeug - INFO - 127.0.0.1 - - [06/Nov/2025 14:35:45] "GET /task-status/8f4085bb-58b8-4d3a-85c3-2ef38c216d5c HTTP/1.1" 200 -
2025-11-06 14:35:47,004 - werkzeug - INFO - 127.0.0.1 - - [06/Nov/2025 14:35:47] "GET /task-status/8f4085bb-58b8-4d3a-85c3-2ef38c216d5c HTTP/1.1" 200 -
2025-11-06 14:35:47,482 - Review.reviews.aetaw_review - INFO - Loading reference data...
2025-11-06 14:35:47,686 - Review.reviews.aetaw_review - INFO - Loaded 75 companies from AEX, AMX, and AScX
2025-11-06 14:35:47,720 - utils.capping_2_step - INFO - 
--- Iteration 1 ---
2025-11-06 14:35:47,720 - utils.capping_2_step - INFO - Companies at 9%: 3
2025-11-06 14:35:47,736 - utils.capping_2_step - INFO - Collective budget used: 42.33% / 36.00%
2025-11-06 14:35:47,736 - utils.capping_2_step - INFO - Excess weight to redistribute: 26.35%
2025-11-06 14:35:47,737 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,738 - utils.capping_2_step - INFO - Max weight change: 15.1920%
2025-11-06 14:35:47,738 - utils.capping_2_step - INFO - 
--- Iteration 2 ---
2025-11-06 14:35:47,738 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,738 - utils.capping_2_step - INFO - Collective budget used: 48.77% / 36.00%
2025-11-06 14:35:47,739 - utils.capping_2_step - INFO - Excess weight to redistribute: 6.49%
2025-11-06 14:35:47,739 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,740 - utils.capping_2_step - INFO - Max weight change: 2.5073%
2025-11-06 14:35:47,740 - utils.capping_2_step - INFO - 
--- Iteration 3 ---
2025-11-06 14:35:47,740 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,740 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,740 - utils.capping_2_step - INFO - Excess weight to redistribute: 2.33%
2025-11-06 14:35:47,741 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,741 - utils.capping_2_step - INFO - Max weight change: 0.6110%
2025-11-06 14:35:47,742 - utils.capping_2_step - INFO - 
--- Iteration 4 ---
2025-11-06 14:35:47,742 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,742 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,742 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.97%
2025-11-06 14:35:47,743 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,743 - utils.capping_2_step - INFO - Max weight change: 0.1999%
2025-11-06 14:35:47,743 - utils.capping_2_step - INFO - 
--- Iteration 5 ---
2025-11-06 14:35:47,743 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,744 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,744 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.40%
2025-11-06 14:35:47,744 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,745 - utils.capping_2_step - INFO - Max weight change: 0.0831%
2025-11-06 14:35:47,745 - utils.capping_2_step - INFO - 
--- Iteration 6 ---
2025-11-06 14:35:47,746 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,746 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,746 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.17%
2025-11-06 14:35:47,746 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Max weight change: 0.0346%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - 
--- Iteration 7 ---
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.07%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Max weight change: 0.0144%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - 
--- Iteration 8 ---
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.03%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - Max weight change: 0.0060%
2025-11-06 14:35:47,747 - utils.capping_2_step - INFO - 
--- Iteration 9 ---
2025-11-06 14:35:47,751 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,751 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,751 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.01%
2025-11-06 14:35:47,751 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,752 - utils.capping_2_step - INFO - Max weight change: 0.0025%
2025-11-06 14:35:47,752 - utils.capping_2_step - INFO - 
--- Iteration 10 ---
2025-11-06 14:35:47,752 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,752 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,753 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.01%
2025-11-06 14:35:47,754 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,754 - utils.capping_2_step - INFO - Max weight change: 0.0010%
2025-11-06 14:35:47,754 - utils.capping_2_step - INFO - 
--- Iteration 11 ---
2025-11-06 14:35:47,754 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Max weight change: 0.0004%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - 
--- Iteration 12 ---
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Max weight change: 0.0002%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - 
--- Iteration 13 ---
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Max weight change: 0.0001%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - 
--- Iteration 14 ---
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,755 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,761 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,761 - utils.capping_2_step - INFO - Max weight change: 0.0000%
2025-11-06 14:35:47,761 - utils.capping_2_step - INFO - 
--- Iteration 15 ---
2025-11-06 14:35:47,762 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,762 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,762 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - Max weight change: 0.0000%
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - 
--- Iteration 16 ---
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,763 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,764 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,764 - utils.capping_2_step - INFO - Max weight change: 0.0000%
2025-11-06 14:35:47,764 - utils.capping_2_step - INFO - 
--- Iteration 17 ---
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Max weight change: 0.0000%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - 
--- Iteration 18 ---
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Companies at 9%: 0
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Collective budget used: 53.27% / 36.00%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Excess weight to redistribute: 0.00%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Redistributed to 71 companies below/at threshold
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Max weight change: 0.0000%
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Converged after 18 iterations
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - 
=== Final Results ===
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Companies at 9%: 3
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Companies between 4.5% and 9%: 5
2025-11-06 14:35:47,765 - utils.capping_2_step - INFO - Total weight above 4.5%: 53.27% (limit: 36.00%)
2025-11-06 14:35:47,765 - utils.capping_2_step - WARNING - WARNING: Collective cap exceeded by 17.27%!
2025-11-06 14:35:47,769 - Review.reviews.aetaw_review - INFO - AETAW capping complete. Companies with CF < 1: 73
2025-11-06 14:35:47,774 - Review.reviews.aetaw_review - INFO - Saving AETAW output to: C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\output\AETAW_df_20251106_143547.xlsx
2025-11-06 14:35:49,003 - werkzeug - INFO - 127.0.0.1 - - [06/Nov/2025 14:35:49] "GET /task-status/8f4085bb-58b8-4d3a-85c3-2ef38c216d5c HTTP/1.1" 200 -
2025-11-06 14:35:49,613 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\utils\\capping_2_step.py', reloading
2025-11-06 14:35:49,629 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\utils\\capping_2_step.py', reloading
