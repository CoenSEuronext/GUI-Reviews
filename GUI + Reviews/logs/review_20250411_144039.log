2025-04-11 14:40:39,935 - werkzeug - WARNING -  * Debugger is active!
2025-04-11 14:40:39,935 - werkzeug - INFO -  * Debugger PIN: 691-175-853
2025-04-11 14:40:42,934 - Review.reviews.lc3wp_review - INFO - Loading EOD data...
2025-04-11 14:40:43,550 - Review.reviews.lc3wp_review - INFO - Loading reference data...
2025-04-11 14:40:53,079 - Review.reviews.lc3wp_review - ERROR - Error during review calculation: Failed to load euronext_world_df from reference data
2025-04-11 14:40:53,079 - Review.reviews.lc3wp_review - ERROR - Traceback (most recent call last):
  File "C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\Review\reviews\lc3wp_review.py", line 73, in run_lc3wp_review
    raise ValueError(f"Failed to load {df_name} from reference data")
ValueError: Failed to load euronext_world_df from reference data

2025-04-11 14:40:53,108 - werkzeug - INFO - 127.0.0.1 - - [11/Apr/2025 14:40:53] "POST /calculate HTTP/1.1" 200 -
2025-04-11 14:40:54,117 - Review.reviews.lc3wp_review - INFO - Loading EOD data...
2025-04-11 14:40:54,861 - Review.reviews.lc3wp_review - INFO - Loading reference data...
2025-04-11 14:41:04,299 - Review.reviews.lc3wp_review - WARNING - Removed 18750 duplicate rows from cdp_climate_df
2025-04-11 14:41:04,299 - Review.reviews.lc3wp_review - INFO - Filtering universe for EU500 companies...
2025-04-11 14:41:04,299 - Review.reviews.lc3wp_review - INFO - Universe size after EU500 filter: 499
2025-04-11 14:41:04,299 - Review.reviews.lc3wp_review - INFO - Adding Free Float data...
2025-04-11 14:41:04,309 - Review.reviews.lc3wp_review - INFO - Adding ICB Subsector data...
2025-04-11 14:41:04,323 - Review.reviews.lc3wp_review - WARNING - Removed 9315 duplicate rows from ICB data
2025-04-11 14:41:04,418 - Review.reviews.lc3wp_review - INFO - Debug file saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\debug\universe_df_after_nace_20250411_144104.xlsx
2025-04-11 14:41:04,418 - Review.reviews.lc3wp_review - INFO - Adding CDP Climate data...
2025-04-11 14:41:04,428 - Review.reviews.lc3wp_review - INFO - Adding Oekom Trust & Carbon data...
2025-04-11 14:41:04,433 - Review.reviews.lc3wp_review - INFO - Adding NACE data...
2025-04-11 14:41:04,436 - Review.reviews.lc3wp_review - INFO - Adding EU Taxonomy flag...
2025-04-11 14:41:04,436 - Review.reviews.lc3wp_review - INFO - Checking GAFI lists and Non-fiscally cooperative countries...
2025-04-11 14:41:04,438 - Review.reviews.lc3wp_review - INFO - Applying exclusion criteria...
2025-04-11 14:41:04,446 - Review.reviews.lc3wp_review - INFO - Marked 50 companies (10%) with worst SG scores for exclusion
2025-04-11 14:41:04,456 - Review.reviews.lc3wp_review - INFO - Calculating Climate Score for ranking...
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Selecting EU Taxonomy companies...
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Found 14 EU Taxonomy companies after exclusions
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Found 302 Non-EU Taxonomy eligible companies after exclusions
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - STEP 4a: Determining target number of Non-EU Taxonomy companies per super-sector...
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Target number of Non-EU Taxonomy companies: 86
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Total eligible Non-EU Taxonomy companies: 302
2025-04-11 14:41:04,467 - Review.reviews.lc3wp_review - INFO - Total target after rounding: 96 (vs. target of 86)
2025-04-11 14:41:04,472 - Review.reviews.lc3wp_review - INFO - Need to remove 10 companies due to rounding up
2025-04-11 14:41:04,473 - Review.reviews.lc3wp_review - INFO - STEP 4b: Selecting Non-EU Taxonomy companies based on climate score...
2025-04-11 14:41:04,473 - Review.reviews.lc3wp_review - INFO - Selected 4 companies from super-sector 1010.0
2025-04-11 14:41:04,474 - Review.reviews.lc3wp_review - INFO - Selected 5 companies from super-sector 1510.0
2025-04-11 14:41:04,474 - Review.reviews.lc3wp_review - INFO - Selected 12 companies from super-sector 2010.0
2025-04-11 14:41:04,475 - Review.reviews.lc3wp_review - INFO - Selected 13 companies from super-sector 3010.0
2025-04-11 14:41:04,475 - Review.reviews.lc3wp_review - INFO - Selected 7 companies from super-sector 3020.0
2025-04-11 14:41:04,476 - Review.reviews.lc3wp_review - INFO - Selected 8 companies from super-sector 3030.0
2025-04-11 14:41:04,476 - Review.reviews.lc3wp_review - INFO - Selected 5 companies from super-sector 3510.0
2025-04-11 14:41:04,477 - Review.reviews.lc3wp_review - INFO - Selected 2 companies from super-sector 4010.0
2025-04-11 14:41:04,477 - Review.reviews.lc3wp_review - INFO - Selected 6 companies from super-sector 4020.0
2025-04-11 14:41:04,478 - Review.reviews.lc3wp_review - INFO - Selected 3 companies from super-sector 4030.0
2025-04-11 14:41:04,478 - Review.reviews.lc3wp_review - INFO - Selected 2 companies from super-sector 4040.0
2025-04-11 14:41:04,479 - Review.reviews.lc3wp_review - INFO - Selected 4 companies from super-sector 4050.0
2025-04-11 14:41:04,479 - Review.reviews.lc3wp_review - INFO - Selected 6 companies from super-sector 4510.0
2025-04-11 14:41:04,480 - Review.reviews.lc3wp_review - INFO - Selected 3 companies from super-sector 4520.0
2025-04-11 14:41:04,480 - Review.reviews.lc3wp_review - INFO - Selected 2 companies from super-sector 5010.0
2025-04-11 14:41:04,481 - Review.reviews.lc3wp_review - INFO - Selected 9 companies from super-sector 5020.0
2025-04-11 14:41:04,482 - Review.reviews.lc3wp_review - INFO - Selected 2 companies from super-sector 5510.0
2025-04-11 14:41:04,482 - Review.reviews.lc3wp_review - INFO - Selected 2 companies from super-sector 5520.0
2025-04-11 14:41:04,483 - Review.reviews.lc3wp_review - INFO - Selected 1 companies from super-sector 6510.0
2025-04-11 14:41:04,490 - Review.reviews.lc3wp_review - INFO - Initial selection has 96 companies, need to remove 10
2025-04-11 14:41:04,490 - Review.reviews.lc3wp_review - INFO - Removed company SE0012853455 from supersector 3020.0 (Climate Score: 2.9711404728789947)
2025-04-11 14:41:04,500 - Review.reviews.lc3wp_review - INFO - Removed company GB0005405286 from supersector 3010.0 (Climate Score: 2.6866666666666648)
2025-04-11 14:41:04,506 - Review.reviews.lc3wp_review - INFO - Removed company GB00BY9D0Y18 from supersector 3030.0 (Climate Score: 2.516321632368115)
2025-04-11 14:41:04,508 - Review.reviews.lc3wp_review - INFO - Removed company FR0000121964 from supersector 3510.0 (Climate Score: 2.39735760225878)
2025-04-11 14:41:04,514 - Review.reviews.lc3wp_review - INFO - Removed company DE0007164600 from supersector 1010.0 (Climate Score: 2.24370342494592)
2025-04-11 14:41:04,517 - Review.reviews.lc3wp_review - INFO - Removed company DE000BAY0017 from supersector 2010.0 (Climate Score: 2.2165721170918)
2025-04-11 14:41:04,522 - Review.reviews.lc3wp_review - INFO - Removed company GB0030913577 from supersector 1510.0 (Climate Score: 2.050969452258145)
2025-04-11 14:41:04,525 - Review.reviews.lc3wp_review - INFO - Removed company DK0060542181 from supersector 5020.0 (Climate Score: 2.03696527269129)
2025-04-11 14:41:04,525 - Review.reviews.lc3wp_review - INFO - Removed company GB00BHJYC057 from supersector 4050.0 (Climate Score: 1.961379401980875)
2025-04-11 14:41:04,531 - Review.reviews.lc3wp_review - INFO - Removed company DE0006048432 from supersector 4020.0 (Climate Score: 1.913748241153015)
2025-04-11 14:41:04,533 - Review.reviews.lc3wp_review - INFO - Final Non-EU Taxonomy selection has 86 companies
2025-04-11 14:41:04,534 - Review.reviews.lc3wp_review - INFO - Minimum companies per supersector: 1
2025-04-11 14:41:04,534 - Review.reviews.lc3wp_review - WARNING - Some supersectors have fewer than 2 companies! Minimum is 1
2025-04-11 14:41:04,536 - Review.reviews.lc3wp_review - INFO - Final selection contains 100 companies
2025-04-11 14:41:04,536 - Review.reviews.lc3wp_review - INFO - - EU Taxonomy: 14
2025-04-11 14:41:04,536 - Review.reviews.lc3wp_review - INFO - - Non-EU Taxonomy: 86
2025-04-11 14:41:04,536 - Review.reviews.lc3wp_review - INFO - Adding PAB flag based on CDP temperature score...
2025-04-11 14:41:04,537 - Review.reviews.lc3wp_review - INFO - Calculating liquidity constraints for all companies...
2025-04-11 14:41:04,537 - Review.reviews.lc3wp_review - INFO - Total FFMC for all companies: 3314861822746.80
2025-04-11 14:41:04,538 - Review.reviews.lc3wp_review - INFO - Market cap based weights calculated for EU Taxonomy companies
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Liquidity caps for EU Taxonomy companies - Max: 5.9021%, Min: 0.6116%, Avg: 2.0346%
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Liquidity floors for EU Taxonomy companies - Max: 0.0000%, Min: 0.0000%, Avg: 0.0000%
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - No liquidity issues found for EU Taxonomy companies
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Liquidity caps for Non-EU Taxonomy companies - Max: 10.0000%, Min: 0.2741%, Avg: 2.6909%
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Liquidity floors for Non-EU Taxonomy companies - Max: 1.6941%, Min: 0.0000%, Avg: 0.0529%
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - No liquidity issues found for Non-EU Taxonomy companies
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Liquidity constraints have been calculated for all 100 companies
2025-04-11 14:41:04,540 - Review.reviews.lc3wp_review - INFO - Saving output files...
2025-04-11 14:41:05,008 - Review.reviews.lc3wp_review - INFO - Results saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\output\LC3WP_review_20250411_144104.xlsx
2025-04-11 14:41:05,033 - werkzeug - INFO - 127.0.0.1 - - [11/Apr/2025 14:41:05] "POST /calculate HTTP/1.1" 200 -
2025-04-11 14:41:13,628 - Review.reviews.lc1ep_review - INFO - Loading EOD data...
2025-04-11 14:41:15,875 - Review.reviews.lc1ep_review - INFO - Loading reference data...
2025-04-11 14:41:25,395 - Review.reviews.lc1ep_review - WARNING - Removed 18750 duplicate rows from cdp_climate_df
2025-04-11 14:41:25,395 - Review.reviews.lc1ep_review - INFO - Filtering universe for EZ300 companies...
2025-04-11 14:41:25,395 - Review.reviews.lc1ep_review - INFO - Universe size after EZ300 filter: 300
2025-04-11 14:41:25,395 - Review.reviews.lc1ep_review - INFO - Adding Free Float data...
2025-04-11 14:41:25,395 - Review.reviews.lc1ep_review - INFO - Adding ICB Subsector data...
2025-04-11 14:41:25,418 - Review.reviews.lc1ep_review - WARNING - Removed 9315 duplicate rows from ICB data
2025-04-11 14:41:25,466 - Review.reviews.lc1ep_review - INFO - Debug file saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\debug\universe_df_after_nace_20250411_144125.xlsx
2025-04-11 14:41:25,476 - Review.reviews.lc1ep_review - INFO - Adding CDP Climate data...
2025-04-11 14:41:25,476 - Review.reviews.lc1ep_review - INFO - Adding Oekom Trust & Carbon data...
2025-04-11 14:41:25,483 - Review.reviews.lc1ep_review - INFO - Adding NACE data...
2025-04-11 14:41:25,485 - Review.reviews.lc1ep_review - INFO - Adding EU Taxonomy flag...
2025-04-11 14:41:25,486 - Review.reviews.lc1ep_review - INFO - Checking GAFI lists and Non-fiscally cooperative countries...
2025-04-11 14:41:25,487 - Review.reviews.lc1ep_review - INFO - Applying exclusion criteria...
2025-04-11 14:41:25,489 - Review.reviews.lc1ep_review - INFO - Marked 30 companies (10%) with worst SG scores for exclusion
2025-04-11 14:41:25,512 - Review.reviews.lc1ep_review - INFO - Calculating Climate Score for ranking...
2025-04-11 14:41:25,513 - Review.reviews.lc1ep_review - INFO - Selecting EU Taxonomy companies...
2025-04-11 14:41:25,515 - Review.reviews.lc1ep_review - INFO - Found 9 EU Taxonomy companies after exclusions
2025-04-11 14:41:25,516 - Review.reviews.lc1ep_review - INFO - Found 174 Non-EU Taxonomy eligible companies after exclusions
2025-04-11 14:41:25,516 - Review.reviews.lc1ep_review - INFO - STEP 4a: Determining target number of Non-EU Taxonomy companies per super-sector...
2025-04-11 14:41:25,516 - Review.reviews.lc1ep_review - INFO - Target number of Non-EU Taxonomy companies: 91
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Total eligible Non-EU Taxonomy companies: 174
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Total target after rounding: 104 (vs. target of 91)
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Need to remove 13 companies due to rounding up
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - STEP 4b: Selecting Non-EU Taxonomy companies based on climate score...
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 6 companies from super-sector 1010.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 6 companies from super-sector 1510.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 13 companies from super-sector 2010.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 15 companies from super-sector 3010.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 6 companies from super-sector 3020.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 7 companies from super-sector 3030.0
2025-04-11 14:41:25,517 - Review.reviews.lc1ep_review - INFO - Selected 6 companies from super-sector 3510.0
2025-04-11 14:41:25,524 - Review.reviews.lc1ep_review - INFO - Selected 4 companies from super-sector 4010.0
2025-04-11 14:41:25,524 - Review.reviews.lc1ep_review - INFO - Selected 7 companies from super-sector 4020.0
2025-04-11 14:41:25,525 - Review.reviews.lc1ep_review - INFO - Selected 3 companies from super-sector 4030.0
2025-04-11 14:41:25,525 - Review.reviews.lc1ep_review - INFO - Selected 2 companies from super-sector 4040.0
2025-04-11 14:41:25,526 - Review.reviews.lc1ep_review - INFO - Selected 4 companies from super-sector 4050.0
2025-04-11 14:41:25,526 - Review.reviews.lc1ep_review - INFO - Selected 5 companies from super-sector 4510.0
2025-04-11 14:41:25,526 - Review.reviews.lc1ep_review - INFO - Selected 3 companies from super-sector 4520.0
2025-04-11 14:41:25,527 - Review.reviews.lc1ep_review - INFO - Selected 2 companies from super-sector 5010.0
2025-04-11 14:41:25,528 - Review.reviews.lc1ep_review - INFO - Selected 8 companies from super-sector 5020.0
2025-04-11 14:41:25,528 - Review.reviews.lc1ep_review - INFO - Selected 2 companies from super-sector 5510.0
2025-04-11 14:41:25,529 - Review.reviews.lc1ep_review - INFO - Selected 3 companies from super-sector 5520.0
2025-04-11 14:41:25,529 - Review.reviews.lc1ep_review - INFO - Selected 2 companies from super-sector 6510.0
2025-04-11 14:41:25,536 - Review.reviews.lc1ep_review - INFO - Initial selection has 104 companies, need to remove 13
2025-04-11 14:41:25,542 - Review.reviews.lc1ep_review - INFO - Removed company FR0000121121 from supersector 3020.0 (Climate Score: 3.2199999999999998)
2025-04-11 14:41:25,542 - Review.reviews.lc1ep_review - INFO - Removed company NL0010801007 from supersector 5520.0 (Climate Score: 3.2199999999999998)
2025-04-11 14:41:25,551 - Review.reviews.lc1ep_review - INFO - Removed company ES0113679I37 from supersector 3010.0 (Climate Score: 3.16)
2025-04-11 14:41:25,553 - Review.reviews.lc1ep_review - INFO - Removed company IT0004056880 from supersector 2010.0 (Climate Score: 3.14576821963194)
2025-04-11 14:41:25,553 - Review.reviews.lc1ep_review - INFO - Removed company DE000TLX1005 from supersector 3030.0 (Climate Score: 3.07)
2025-04-11 14:41:25,565 - Review.reviews.lc1ep_review - INFO - Removed company NL0000226223 from supersector 1010.0 (Climate Score: 2.883797265501265)
2025-04-11 14:41:25,569 - Review.reviews.lc1ep_review - INFO - Removed company ES0105025003 from supersector 3510.0 (Climate Score: 2.39250338493065)
2025-04-11 14:41:25,573 - Review.reviews.lc1ep_review - INFO - Removed company FR0000120404 from supersector 4050.0 (Climate Score: 2.3914062194480947)
2025-04-11 14:41:25,576 - Review.reviews.lc1ep_review - INFO - Removed company NL0015435975 from supersector 4510.0 (Climate Score: 2.3248496808315147)
2025-04-11 14:41:25,576 - Review.reviews.lc1ep_review - INFO - Removed company NL0011585146 from supersector 4010.0 (Climate Score: 2.28839766789769)
2025-04-11 14:41:25,583 - Review.reviews.lc1ep_review - INFO - Removed company IT0004965148 from supersector 4020.0 (Climate Score: 2.2734781952180754)
2025-04-11 14:41:25,585 - Review.reviews.lc1ep_review - INFO - Removed company IT0005090300 from supersector 1510.0 (Climate Score: 2.26825660773674)
2025-04-11 14:41:25,588 - Review.reviews.lc1ep_review - INFO - Removed company DE0006602006 from supersector 5020.0 (Climate Score: 2.124887594988665)
2025-04-11 14:41:25,590 - Review.reviews.lc1ep_review - INFO - Final Non-EU Taxonomy selection has 91 companies
2025-04-11 14:41:25,591 - Review.reviews.lc1ep_review - INFO - Minimum companies per supersector: 2
2025-04-11 14:41:25,592 - Review.reviews.lc1ep_review - INFO - Final selection contains 100 companies
2025-04-11 14:41:25,592 - Review.reviews.lc1ep_review - INFO - - EU Taxonomy: 9
2025-04-11 14:41:25,593 - Review.reviews.lc1ep_review - INFO - - Non-EU Taxonomy: 91
2025-04-11 14:41:25,593 - Review.reviews.lc1ep_review - INFO - Adding PAB flag based on CDP temperature score...
2025-04-11 14:41:25,593 - Review.reviews.lc1ep_review - INFO - Calculating liquidity constraints for all companies...
2025-04-11 14:41:25,593 - Review.reviews.lc1ep_review - INFO - Total FFMC for all companies: 3396968207931.17
2025-04-11 14:41:25,595 - Review.reviews.lc1ep_review - INFO - Market cap based weights calculated for EU Taxonomy companies
2025-04-11 14:41:25,596 - Review.reviews.lc1ep_review - INFO - Liquidity caps for EU Taxonomy companies - Max: 5.8634%, Min: 0.6092%, Avg: 2.0323%
2025-04-11 14:41:25,596 - Review.reviews.lc1ep_review - INFO - Liquidity floors for EU Taxonomy companies - Max: 0.0000%, Min: 0.0000%, Avg: 0.0000%
2025-04-11 14:41:25,596 - Review.reviews.lc1ep_review - INFO - No liquidity issues found for EU Taxonomy companies
2025-04-11 14:41:25,599 - Review.reviews.lc1ep_review - INFO - Liquidity caps for Non-EU Taxonomy companies - Max: 10.0000%, Min: 0.1783%, Avg: 2.4830%
2025-04-11 14:41:25,599 - Review.reviews.lc1ep_review - INFO - Liquidity floors for Non-EU Taxonomy companies - Max: 2.1252%, Min: 0.0000%, Avg: 0.0887%
2025-04-11 14:41:25,600 - Review.reviews.lc1ep_review - INFO - No liquidity issues found for Non-EU Taxonomy companies
2025-04-11 14:41:25,600 - Review.reviews.lc1ep_review - INFO - Liquidity constraints have been calculated for all 100 companies
2025-04-11 14:41:25,600 - Review.reviews.lc1ep_review - INFO - Saving output files...
2025-04-11 14:41:25,925 - Review.reviews.lc1ep_review - INFO - Results saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\output\LC100_review_20250411_144125.xlsx
2025-04-11 14:41:25,958 - werkzeug - INFO - 127.0.0.1 - - [11/Apr/2025 14:41:25] "POST /calculate HTTP/1.1" 200 -
2025-04-11 14:42:23,955 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc3wp_review.py', reloading
2025-04-11 14:42:23,955 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc3wp_review.py', reloading
