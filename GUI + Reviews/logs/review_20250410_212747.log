2025-04-10 21:27:47,252 - werkzeug - WARNING -  * Debugger is active!
2025-04-10 21:27:47,254 - werkzeug - INFO -  * Debugger PIN: 691-175-853
2025-04-10 21:27:48,089 - Review.reviews.lc100_review - INFO - Loading EOD data...
2025-04-10 21:28:06,537 - Review.reviews.lc100_review - INFO - Loading reference data...
2025-04-10 21:28:16,019 - Review.reviews.lc100_review - WARNING - Removed 18750 duplicate rows from cdp_climate_df
2025-04-10 21:28:16,021 - Review.reviews.lc100_review - INFO - Filtering universe for EU500 companies...
2025-04-10 21:28:16,022 - Review.reviews.lc100_review - INFO - Universe size after EU500 filter: 499
2025-04-10 21:28:16,022 - Review.reviews.lc100_review - INFO - Adding Free Float data...
2025-04-10 21:28:16,025 - Review.reviews.lc100_review - INFO - Adding ICB Subsector data...
2025-04-10 21:28:16,045 - Review.reviews.lc100_review - WARNING - Removed 9316 duplicate rows from ICB data
2025-04-10 21:28:16,131 - Review.reviews.lc100_review - INFO - Debug file saved to C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\debug\universe_df_after_nace_20250410_212816.xlsx
2025-04-10 21:28:16,131 - Review.reviews.lc100_review - INFO - Adding CDP Climate data...
2025-04-10 21:28:16,136 - Review.reviews.lc100_review - INFO - Adding Oekom Trust & Carbon data...
2025-04-10 21:28:16,138 - Review.reviews.lc100_review - INFO - Adding NACE data...
2025-04-10 21:28:16,140 - Review.reviews.lc100_review - INFO - Adding EU Taxonomy flag...
2025-04-10 21:28:16,141 - Review.reviews.lc100_review - INFO - Checking GAFI lists and Non-fiscally cooperative countries...
2025-04-10 21:28:16,142 - Review.reviews.lc100_review - INFO - Applying exclusion criteria...
2025-04-10 21:28:16,149 - Review.reviews.lc100_review - INFO - Marked 50 companies (10%) with worst SG scores for exclusion
2025-04-10 21:28:16,167 - Review.reviews.lc100_review - INFO - Calculating Climate Score for ranking...
2025-04-10 21:28:16,168 - Review.reviews.lc100_review - INFO - Selecting EU Taxonomy companies...
2025-04-10 21:28:16,170 - Review.reviews.lc100_review - INFO - Found 13 EU Taxonomy companies after exclusions
2025-04-10 21:28:16,171 - Review.reviews.lc100_review - INFO - Found 303 Non-EU Taxonomy eligible companies after exclusions
2025-04-10 21:28:16,171 - Review.reviews.lc100_review - INFO - STEP 4a: Determining target number of Non-EU Taxonomy companies per super-sector...
2025-04-10 21:28:16,171 - Review.reviews.lc100_review - INFO - Target number of Non-EU Taxonomy companies: 87
2025-04-10 21:28:16,173 - Review.reviews.lc100_review - INFO - Total eligible Non-EU Taxonomy companies: 303
2025-04-10 21:28:16,173 - Review.reviews.lc100_review - INFO - Total target after rounding: 98 (vs. target of 87)
2025-04-10 21:28:16,174 - Review.reviews.lc100_review - INFO - Need to remove 11 companies due to rounding up
2025-04-10 21:28:16,175 - Review.reviews.lc100_review - INFO - STEP 4b: Selecting Non-EU Taxonomy companies based on climate score...
2025-04-10 21:28:16,176 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 1010.0
2025-04-10 21:28:16,176 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 1510.0
2025-04-10 21:28:16,177 - Review.reviews.lc100_review - INFO - Selected 13 companies from super-sector 2010.0
2025-04-10 21:28:16,177 - Review.reviews.lc100_review - INFO - Selected 13 companies from super-sector 3010.0
2025-04-10 21:28:16,178 - Review.reviews.lc100_review - INFO - Selected 7 companies from super-sector 3020.0
2025-04-10 21:28:16,178 - Review.reviews.lc100_review - INFO - Selected 8 companies from super-sector 3030.0
2025-04-10 21:28:16,179 - Review.reviews.lc100_review - INFO - Selected 5 companies from super-sector 3510.0
2025-04-10 21:28:16,179 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 4010.0
2025-04-10 21:28:16,180 - Review.reviews.lc100_review - INFO - Selected 6 companies from super-sector 4020.0
2025-04-10 21:28:16,180 - Review.reviews.lc100_review - INFO - Selected 3 companies from super-sector 4030.0
2025-04-10 21:28:16,181 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 4040.0
2025-04-10 21:28:16,181 - Review.reviews.lc100_review - INFO - Selected 4 companies from super-sector 4050.0
2025-04-10 21:28:16,182 - Review.reviews.lc100_review - INFO - Selected 6 companies from super-sector 4510.0
2025-04-10 21:28:16,182 - Review.reviews.lc100_review - INFO - Selected 3 companies from super-sector 4520.0
2025-04-10 21:28:16,183 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5010.0
2025-04-10 21:28:16,183 - Review.reviews.lc100_review - INFO - Selected 9 companies from super-sector 5020.0
2025-04-10 21:28:16,184 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5510.0
2025-04-10 21:28:16,184 - Review.reviews.lc100_review - INFO - Selected 2 companies from super-sector 5520.0
2025-04-10 21:28:16,184 - Review.reviews.lc100_review - INFO - Selected 1 companies from super-sector 6510.0
2025-04-10 21:28:16,191 - Review.reviews.lc100_review - INFO - Initial selection has 98 companies, need to remove 11
2025-04-10 21:28:16,197 - Review.reviews.lc100_review - INFO - Removed company SE0012853455 from supersector 3020.0 (Climate Score: 2.9711404728789947)
2025-04-10 21:28:16,201 - Review.reviews.lc100_review - INFO - Removed company GB0005405286 from supersector 3010.0 (Climate Score: 2.6866666666666648)
2025-04-10 21:28:16,207 - Review.reviews.lc100_review - INFO - Removed company GB0004082847 from supersector 3010.0 (Climate Score: 2.585)
2025-04-10 21:28:16,212 - Review.reviews.lc100_review - INFO - Removed company GB00BPQY8M80 from supersector 3030.0 (Climate Score: 2.519710481764205)
2025-04-10 21:28:16,216 - Review.reviews.lc100_review - INFO - Removed company NO0003053605 from supersector 3030.0 (Climate Score: 2.45999707128425)
2025-04-10 21:28:16,221 - Review.reviews.lc100_review - INFO - Removed company GB00BM8PJY71 from supersector 3010.0 (Climate Score: 2.4596710826767954)
2025-04-10 21:28:16,226 - Review.reviews.lc100_review - INFO - Removed company GB00BYT1DJ19 from supersector 3020.0 (Climate Score: 2.458257086886375)
2025-04-10 21:28:16,231 - Review.reviews.lc100_review - INFO - Removed company GB00B0SWJX34 from supersector 3020.0 (Climate Score: 2.4582204139462247)
2025-04-10 21:28:16,236 - Review.reviews.lc100_review - INFO - Removed company GB0007099541 from supersector 3030.0 (Climate Score: 2.45)
2025-04-10 21:28:16,241 - Review.reviews.lc100_review - INFO - Removed company CH0011075394 from supersector 3030.0 (Climate Score: 2.39833333333333)
2025-04-10 21:28:16,246 - Review.reviews.lc100_review - INFO - Removed company FR0000121964 from supersector 3510.0 (Climate Score: 2.39735760225878)
2025-04-10 21:28:16,248 - Review.reviews.lc100_review - INFO - Final Non-EU Taxonomy selection has 87 companies
2025-04-10 21:28:16,248 - Review.reviews.lc100_review - INFO - Minimum companies per supersector: 1
2025-04-10 21:28:16,248 - Review.reviews.lc100_review - WARNING - Some supersectors have fewer than 2 companies! Minimum is 1
2025-04-10 21:28:16,250 - Review.reviews.lc100_review - INFO - Final selection contains 100 companies
2025-04-10 21:28:16,250 - Review.reviews.lc100_review - INFO - - EU Taxonomy: 13
2025-04-10 21:28:16,251 - Review.reviews.lc100_review - INFO - - Non-EU Taxonomy: 87
2025-04-10 21:28:16,251 - Review.reviews.lc100_review - INFO - Adding PAB flag based on CDP temperature score...
2025-04-10 21:28:16,251 - Review.reviews.lc100_review - INFO - Calculating liquidity constraints for all companies...
2025-04-10 21:28:16,252 - Review.reviews.lc100_review - INFO - Total FFMC for all companies: 3595475201954.70
2025-04-10 21:28:16,252 - Review.reviews.lc100_review - ERROR - Error during review calculation: cannot access local variable 'eu_taxonomy_selection' where it is not associated with a value
2025-04-10 21:28:16,253 - Review.reviews.lc100_review - ERROR - Traceback (most recent call last):
  File "C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\Review\reviews\lc100_review.py", line 776, in run_lc100_review
    eu_taxonomy_selection['WIG'] = eu_taxonomy_selection['Mcap in EUR'] / total_ffmc
                                   ^^^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'eu_taxonomy_selection' where it is not associated with a value

2025-04-10 21:28:16,285 - werkzeug - INFO - 127.0.0.1 - - [10/Apr/2025 21:28:16] "POST /calculate HTTP/1.1" 200 -
2025-04-10 21:29:09,656 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
2025-04-10 21:29:09,657 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
2025-04-10 21:29:09,658 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\lc100_review.py', reloading
