2025-07-25 11:17:25,514 - werkzeug - WARNING -  * Debugger is active!
2025-07-25 11:17:25,524 - werkzeug - INFO -  * Debugger PIN: 691-175-853
2025-07-25 11:17:31,496 - Review.reviews.eus5p_review - INFO - Loading EOD data...
2025-07-25 11:17:35,279 - Review.reviews.eus5p_review - INFO - Loading reference data...
2025-07-25 11:17:42,723 - Review.reviews.eus5p_review - INFO - Common columns (11): ['12 month aver. turnover EUR', '20 days aver. turn EUR', '3 months aver. Turnover USD', '6 month aver. turnover EUR', 'Currency', 'ISIN', 'NOSH', 'Name', 'Price', 'Rank', 'Ticker']
2025-07-25 11:17:42,733 - Review.reviews.eus5p_review - INFO - Eurozone-only columns (8): ['10 days aver. turn EUR', '100 days aver. turn EUR', '100 days volatility', '126 days volatility', '180 days volatility', '3 months aver. Turnover EUR', '5 days aver. turn EUR', 'MIC']
2025-07-25 11:17:42,733 - Review.reviews.eus5p_review - INFO - North America-only columns (3): ['3 month aver. turnover EUR', 'Exchange Name (VND)', 'Sec Market Value (EUR)']
2025-07-25 11:17:42,733 - Review.reviews.eus5p_review - INFO - Final column order will be: ['Rank', 'Ticker', 'Name', 'ISIN', 'MIC', 'NOSH', 'Price', 'Currency', '12 month aver. turnover EUR', '20 days aver. turn EUR', '10 days aver. turn EUR', '5 days aver. turn EUR', '6 month aver. turnover EUR', '126 days volatility', '100 days volatility', '100 days aver. turn EUR', '180 days volatility', '3 months aver. Turnover EUR', '3 months aver. Turnover USD', 'Exchange Name (VND)', 'Sec Market Value (EUR)', '3 month aver. turnover EUR']
2025-07-25 11:17:42,733 - Review.reviews.eus5p_review - INFO - Total columns in combined DataFrame: 22
2025-07-25 11:17:42,789 - Review.reviews.eus5p_review - INFO - Total universe: 800 companies
2025-07-25 11:17:42,789 - Review.reviews.eus5p_review - INFO - Eurozone companies: 300
2025-07-25 11:17:42,789 - Review.reviews.eus5p_review - INFO - North America companies: 500
2025-07-25 11:17:42,808 - Review.reviews.eus5p_review - INFO - Eligible Eurozone companies: 300
2025-07-25 11:17:42,808 - Review.reviews.eus5p_review - INFO - Eligible North America companies: 500
2025-07-25 11:17:42,809 - Review.reviews.eus5p_review - INFO - Selecting top 35 Eurozone companies with highest FFMC...
2025-07-25 11:17:42,809 - Review.reviews.eus5p_review - INFO - Selecting top 15 North America companies with highest FFMC...
2025-07-25 11:17:42,811 - Review.reviews.eus5p_review - INFO - Selected 35 Eurozone companies
2025-07-25 11:17:42,811 - Review.reviews.eus5p_review - INFO - Selected 15 North America companies
2025-07-25 11:17:42,812 - Review.reviews.eus5p_review - INFO - Total selected companies: 50
2025-07-25 11:17:42,812 - Review.reviews.eus5p_review - INFO - Final selection - Eurozone: 35, North America: 15
2025-07-25 11:17:42,814 - Review.reviews.eus5p_review - ERROR - Error during review calculation: 'Universe'
2025-07-25 11:17:42,817 - Review.reviews.eus5p_review - ERROR - Traceback (most recent call last):
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Universe'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\Review\reviews\eus5p_review.py", line 215, in run_eus5p_review
    final_ez_count = len(EUS5P_df[EUS5P_df['Universe'] == 'EZ300'])
                                  ~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Universe'

2025-07-25 11:17:42,831 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:17:42] "POST /calculate HTTP/1.1" 200 -
2025-07-25 11:17:58,129 - Review.reviews.eus5p_review - INFO - Loading EOD data...
2025-07-25 11:17:59,860 - Review.reviews.eus5p_review - INFO - Loading reference data...
2025-07-25 11:18:07,121 - Review.reviews.eus5p_review - INFO - Common columns (11): ['12 month aver. turnover EUR', '20 days aver. turn EUR', '3 months aver. Turnover USD', '6 month aver. turnover EUR', 'Currency', 'ISIN', 'NOSH', 'Name', 'Price', 'Rank', 'Ticker']
2025-07-25 11:18:07,121 - Review.reviews.eus5p_review - INFO - Eurozone-only columns (8): ['10 days aver. turn EUR', '100 days aver. turn EUR', '100 days volatility', '126 days volatility', '180 days volatility', '3 months aver. Turnover EUR', '5 days aver. turn EUR', 'MIC']
2025-07-25 11:18:07,121 - Review.reviews.eus5p_review - INFO - North America-only columns (3): ['3 month aver. turnover EUR', 'Exchange Name (VND)', 'Sec Market Value (EUR)']
2025-07-25 11:18:07,121 - Review.reviews.eus5p_review - INFO - Final column order will be: ['Rank', 'Ticker', 'Name', 'ISIN', 'MIC', 'NOSH', 'Price', 'Currency', '12 month aver. turnover EUR', '20 days aver. turn EUR', '10 days aver. turn EUR', '5 days aver. turn EUR', '6 month aver. turnover EUR', '126 days volatility', '100 days volatility', '100 days aver. turn EUR', '180 days volatility', '3 months aver. Turnover EUR', '3 months aver. Turnover USD', 'Exchange Name (VND)', 'Sec Market Value (EUR)', '3 month aver. turnover EUR']
2025-07-25 11:18:07,121 - Review.reviews.eus5p_review - INFO - Total columns in combined DataFrame: 22
2025-07-25 11:18:07,188 - Review.reviews.eus5p_review - INFO - Total universe: 800 companies
2025-07-25 11:18:07,188 - Review.reviews.eus5p_review - INFO - Eurozone companies: 300
2025-07-25 11:18:07,188 - Review.reviews.eus5p_review - INFO - North America companies: 500
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Eligible Eurozone companies: 300
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Eligible North America companies: 500
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Selecting top 35 Eurozone companies with highest FFMC...
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Selecting top 15 North America companies with highest FFMC...
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Selected 35 Eurozone companies
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Selected 15 North America companies
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Total selected companies: 50
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - INFO - Final selection - Eurozone: 35, North America: 15
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - ERROR - Error during review calculation: 'Universe'
2025-07-25 11:18:07,195 - Review.reviews.eus5p_review - ERROR - Traceback (most recent call last):
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Universe'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\CSonneveld\OneDrive - Euronext\Documents\Projects\GUI + Reviews\Review\reviews\eus5p_review.py", line 215, in run_eus5p_review
    final_ez_count = len(EUS5P_df[EUS5P_df['Universe'] == 'EZ300'])
                                  ~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\CSonneveld\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'Universe'

2025-07-25 11:18:07,218 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:18:07] "POST /calculate HTTP/1.1" 200 -
2025-07-25 11:18:21,689 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\eus5p_review.py', reloading
2025-07-25 11:18:21,689 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\eus5p_review.py', reloading
2025-07-25 11:18:21,691 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\eus5p_review.py', reloading
2025-07-25 11:18:21,691 - werkzeug - INFO -  * Detected change in 'C:\\Users\\CSonneveld\\OneDrive - Euronext\\Documents\\Projects\\GUI + Reviews\\Review\\reviews\\eus5p_review.py', reloading
